<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>VineTalk: include/vine_talk.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">VineTalk
   </div>
   <div id="projectbrief">ConnectingAccelerators</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('vine__talk_8h.html','');});
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">vine_talk.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;stdio.h&gt;</code><br />
<code>#include &lt;stddef.h&gt;</code><br />
<code>#include &quot;<a class="el" href="vine__talk__types_8h_source.html">vine_talk_types.h</a>&quot;</code><br />
<code>#include &lt;<a class="el" href="vine__accel__types_8h_source.html">core/vine_accel_types.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="vine__buffer_8h_source.html">core/vine_buffer.h</a>&gt;</code><br />
</div>
<p><a href="vine__talk_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a1fddfaf3cd290cd98f9e57a17661a20b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="vine__pipe_8h.html#a6d4fcd27f2cef464d7989cc8eb20723f">vine_pipe_s</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vine__talk_8h.html#a1fddfaf3cd290cd98f9e57a17661a20b">vine_talk_init</a> ()</td></tr>
<tr class="separator:a1fddfaf3cd290cd98f9e57a17661a20b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa863f116d46fc35daa4342dbd22392c1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vine__talk_8h.html#aa863f116d46fc35daa4342dbd22392c1">vine_talk_exit</a> ()</td></tr>
<tr class="separator:aa863f116d46fc35daa4342dbd22392c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab1d17f63b021eb05dcbf1b2aac7001b7"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vine__talk_8h.html#ab1d17f63b021eb05dcbf1b2aac7001b7">vine_accel_list</a> (<a class="el" href="vine__talk__types_8h.html#a28067f06d532de7cd0b4f901db02458c">vine_accel_type_e</a> <a class="el" href="testing_8h.html#ab854dc9c78124c5cb3372d6401138f0e">type</a>, int physical, <a class="el" href="vine__talk__types_8h.html#a3d26e751468e358a19eaa206b16dc626">vine_accel</a> ***accels)</td></tr>
<tr class="separator:ab1d17f63b021eb05dcbf1b2aac7001b7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a91da26a0388c924a26210abe902a22f7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vine__talk_8h.html#a91da26a0388c924a26210abe902a22f7">vine_accel_list_free</a> (<a class="el" href="vine__talk__types_8h.html#a3d26e751468e358a19eaa206b16dc626">vine_accel</a> **accels)</td></tr>
<tr class="separator:a91da26a0388c924a26210abe902a22f7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ade86038a37023bdefaf6ba0b2595b60b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="vine__talk__types_8h.html#a70d090e66fac50d9bcdea0bc0d9cee56">vine_accel_loc_s</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vine__talk_8h.html#ade86038a37023bdefaf6ba0b2595b60b">vine_accel_location</a> (<a class="el" href="vine__talk__types_8h.html#a3d26e751468e358a19eaa206b16dc626">vine_accel</a> *accel)</td></tr>
<tr class="separator:ade86038a37023bdefaf6ba0b2595b60b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0509922e5872e8cf463bba277dcdda5d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="vine__talk__types_8h.html#a28067f06d532de7cd0b4f901db02458c">vine_accel_type_e</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vine__talk_8h.html#a0509922e5872e8cf463bba277dcdda5d">vine_accel_type</a> (<a class="el" href="vine__talk__types_8h.html#a3d26e751468e358a19eaa206b16dc626">vine_accel</a> *accel)</td></tr>
<tr class="separator:a0509922e5872e8cf463bba277dcdda5d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a580e533b8fe1c8993ef0df4fc7ccf57f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="vine__talk__types_8h.html#a1d86936cf4f47960ac4aa4066366894b">vine_accel_state_e</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vine__talk_8h.html#a580e533b8fe1c8993ef0df4fc7ccf57f">vine_accel_stat</a> (<a class="el" href="vine__talk__types_8h.html#a3d26e751468e358a19eaa206b16dc626">vine_accel</a> *accel, <a class="el" href="vine__talk__types_8h.html#a7fd48fa268edf312064cc8136c6f403f">vine_accel_stats_s</a> *stat)</td></tr>
<tr class="separator:a580e533b8fe1c8993ef0df4fc7ccf57f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a93bc235e67e8d8393d0c67d6741a6059"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vine__talk_8h.html#a93bc235e67e8d8393d0c67d6741a6059">vine_accel_acquire_phys</a> (<a class="el" href="vine__talk__types_8h.html#a3d26e751468e358a19eaa206b16dc626">vine_accel</a> **accel)</td></tr>
<tr class="separator:a93bc235e67e8d8393d0c67d6741a6059"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a98abe6596404bad361779e08792e9868"><td class="memItemLeft" align="right" valign="top"><a class="el" href="vine__talk__types_8h.html#a3d26e751468e358a19eaa206b16dc626">vine_accel</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vine__talk_8h.html#a98abe6596404bad361779e08792e9868">vine_accel_acquire_type</a> (<a class="el" href="vine__talk__types_8h.html#a28067f06d532de7cd0b4f901db02458c">vine_accel_type_e</a> <a class="el" href="testing_8h.html#ab854dc9c78124c5cb3372d6401138f0e">type</a>)</td></tr>
<tr class="separator:a98abe6596404bad361779e08792e9868"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afd364333343dbbfd8bf7f7ef590ca868"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vine__talk_8h.html#afd364333343dbbfd8bf7f7ef590ca868">vine_accel_release</a> (<a class="el" href="vine__talk__types_8h.html#a3d26e751468e358a19eaa206b16dc626">vine_accel</a> **accel)</td></tr>
<tr class="separator:afd364333343dbbfd8bf7f7ef590ca868"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aef9de636bc13a16a26d392dd1f65ff23"><td class="memItemLeft" align="right" valign="top"><a class="el" href="vine__talk__types_8h.html#a52f8406ca38559d34b304c16b45d60a8">vine_proc</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vine__talk_8h.html#aef9de636bc13a16a26d392dd1f65ff23">vine_proc_register</a> (<a class="el" href="vine__talk__types_8h.html#a28067f06d532de7cd0b4f901db02458c">vine_accel_type_e</a> <a class="el" href="testing_8h.html#ab854dc9c78124c5cb3372d6401138f0e">type</a>, const char *func_name, const void *func_bytes, size_t func_bytes_size)</td></tr>
<tr class="separator:aef9de636bc13a16a26d392dd1f65ff23"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac4906d6ab1c3c37c7dc0ade34ad65b6f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="vine__talk__types_8h.html#a52f8406ca38559d34b304c16b45d60a8">vine_proc</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vine__talk_8h.html#ac4906d6ab1c3c37c7dc0ade34ad65b6f">vine_proc_get</a> (<a class="el" href="vine__talk__types_8h.html#a28067f06d532de7cd0b4f901db02458c">vine_accel_type_e</a> <a class="el" href="testing_8h.html#ab854dc9c78124c5cb3372d6401138f0e">type</a>, const char *func_name)</td></tr>
<tr class="separator:ac4906d6ab1c3c37c7dc0ade34ad65b6f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa15ee30e249591fe60a57b4c84379cf7"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vine__talk_8h.html#aa15ee30e249591fe60a57b4c84379cf7">vine_proc_put</a> (<a class="el" href="vine__talk__types_8h.html#a52f8406ca38559d34b304c16b45d60a8">vine_proc</a> *func)</td></tr>
<tr class="separator:aa15ee30e249591fe60a57b4c84379cf7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aedb8795edb0156af6b03e4cae61fbd8c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="vine__talk__types_8h.html#a05127582e850b1f19fc38abfd78ccd33">vine_task</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vine__talk_8h.html#aedb8795edb0156af6b03e4cae61fbd8c">vine_task_issue</a> (<a class="el" href="vine__talk__types_8h.html#a3d26e751468e358a19eaa206b16dc626">vine_accel</a> *accel, <a class="el" href="vine__talk__types_8h.html#a52f8406ca38559d34b304c16b45d60a8">vine_proc</a> *proc, <a class="el" href="structvine__buffer__s.html">vine_buffer_s</a> *<a class="el" href="vdf_8cpp.html#af4cdfe4b2cecfdb851231d28aa2db854">args</a>, size_t in_count, <a class="el" href="structvine__buffer__s.html">vine_buffer_s</a> *input, size_t out_count, <a class="el" href="structvine__buffer__s.html">vine_buffer_s</a> *output)</td></tr>
<tr class="separator:aedb8795edb0156af6b03e4cae61fbd8c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a205d618b2de39299c462965386cf122a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="vine__talk__types_8h.html#a02c29f7677bfa284efb20ffaa5c74a7a">vine_task_state_e</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vine__talk_8h.html#a205d618b2de39299c462965386cf122a">vine_task_stat</a> (<a class="el" href="vine__talk__types_8h.html#a05127582e850b1f19fc38abfd78ccd33">vine_task</a> *task, <a class="el" href="vine__talk__types_8h.html#a73d6ee4415d3d6e165d79143d4be5ba8">vine_task_stats_s</a> *stats)</td></tr>
<tr class="separator:a205d618b2de39299c462965386cf122a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aac7f50c5715bb86b23745bd19addd8ae"><td class="memItemLeft" align="right" valign="top"><a class="el" href="vine__talk__types_8h.html#a02c29f7677bfa284efb20ffaa5c74a7a">vine_task_state_e</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vine__talk_8h.html#aac7f50c5715bb86b23745bd19addd8ae">vine_task_wait</a> (<a class="el" href="vine__talk__types_8h.html#a05127582e850b1f19fc38abfd78ccd33">vine_task</a> *task)</td></tr>
<tr class="separator:aac7f50c5715bb86b23745bd19addd8ae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a888a471804241ed0c809348989d0d5fd"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vine__talk_8h.html#a888a471804241ed0c809348989d0d5fd">vine_task_free</a> (<a class="el" href="vine__talk__types_8h.html#a05127582e850b1f19fc38abfd78ccd33">vine_task</a> *task)</td></tr>
<tr class="separator:a888a471804241ed0c809348989d0d5fd"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Example use of the VineTalk API: </p><div class="fragment"><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="vine__talk_8h.html">vine_talk.h</a>&quot;</span></div><div class="line"><span class="preprocessor">#include &lt;stdlib.h&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;pthread.h&gt;</span></div><div class="line"></div><div class="line"><span class="comment">/*Random define just to fill some blanks */</span></div><div class="line"><span class="preprocessor">#define INPUT_SIZE  5</span></div><div class="line"><span class="preprocessor">#define OUTPUT_SIZE 10</span></div><div class="line"><span class="preprocessor">#define SIZEOF(ARG) 5</span></div><div class="line"></div><div class="line"><span class="preprocessor">#define ADD_BYTE_CODE_SIZE 10</span></div><div class="line"></div><div class="line"><span class="keywordtype">char</span> *<a class="code" href="producer_8c.html#ab6581bf7d105b6cbceb7ae0b791e9004">add_byte_code</a>[<a class="code" href="producer_8c.html#ac05d0f0cfa71cfce61bb0b502ca9d604">ADD_BYTE_CODE_SIZE</a>];</div><div class="line"><span class="keywordtype">void</span>* <a class="code" href="testing_8h.html#abcb7402d3509701b36e879da6711477d">thread</a>(<span class="keywordtype">void</span> *thread_args)</div><div class="line">{</div><div class="line">    <a class="code" href="vine__talk__types_8h.html#a52f8406ca38559d34b304c16b45d60a8">vine_proc</a> *add_proc = <a class="code" href="vine__talk_8h.html#ac4906d6ab1c3c37c7dc0ade34ad65b6f">vine_proc_get</a>(<a class="code" href="vine__talk__types_8h.html#ae1360554e303883862a00382e62a6ecda0035eb0600d18dfc302f6bf7a7cbfa3b">CPU</a>, <span class="stringliteral">&quot;add&quot;</span>); <span class="comment">/* Request function</span></div><div class="line"><span class="comment">                                                      * from vineyard</span></div><div class="line"><span class="comment">                                                      * process/function</span></div><div class="line"><span class="comment">                                                      * repository. */</span></div><div class="line"></div><div class="line">    <span class="keywordflow">if</span> (!add_proc) <span class="comment">/* Repository did not contain function */</span></div><div class="line">        add_proc = <a class="code" href="vine__talk_8h.html#aef9de636bc13a16a26d392dd1f65ff23">vine_proc_register</a>(<a class="code" href="vine__talk__types_8h.html#ae1360554e303883862a00382e62a6ecda0035eb0600d18dfc302f6bf7a7cbfa3b">CPU</a>, <span class="stringliteral">&quot;add&quot;</span>, <a class="code" href="producer_8c.html#ab6581bf7d105b6cbceb7ae0b791e9004">add_byte_code</a>,</div><div class="line">                                      <a class="code" href="producer_8c.html#ac05d0f0cfa71cfce61bb0b502ca9d604">ADD_BYTE_CODE_SIZE</a>);  <span class="comment">/* Register</span></div><div class="line"><span class="comment">                                                                 * function</span></div><div class="line"><span class="comment">                                                                 * to</span></div><div class="line"><span class="comment">                                                                 * vineyard</span></div><div class="line"><span class="comment">                                                                 * process/function</span></div><div class="line"><span class="comment">                                                                 * repository</span></div><div class="line"><span class="comment">                                                                 * and get</span></div><div class="line"><span class="comment">                                                                 * vine_proc</span></div><div class="line"><span class="comment">                                                                 * reference.</span></div><div class="line"><span class="comment">                                                                 * */</span></div><div class="line"></div><div class="line"></div><div class="line">    <a class="code" href="structvine__buffer__s.html">vine_buffer_s</a> inputs[2]=</div><div class="line">    {</div><div class="line">        <a class="code" href="vine__buffer_8h.html#af3a4ffac07a26b21b8b2dcb886b830e3">VINE_BUFFER</a>(<span class="stringliteral">&quot;Talk&quot;</span>,<a class="code" href="producer_8c.html#abcf72cd23bdafb47b19023d91b4c107d">INPUT_SIZE</a>),</div><div class="line">        <a class="code" href="vine__buffer_8h.html#af3a4ffac07a26b21b8b2dcb886b830e3">VINE_BUFFER</a>(<span class="stringliteral">&quot;Vine&quot;</span>,<a class="code" href="producer_8c.html#abcf72cd23bdafb47b19023d91b4c107d">INPUT_SIZE</a>)</div><div class="line">    };</div><div class="line"></div><div class="line"></div><div class="line">    <span class="comment">/* Input data initialized */</span></div><div class="line">    <span class="keywordtype">char</span> result[<a class="code" href="producer_8c.html#a894874fce4252e840e2412fd1dbfa4ea">OUTPUT_SIZE</a>] = {<span class="charliteral">&#39;F&#39;</span>,<span class="charliteral">&#39;A&#39;</span>,<span class="charliteral">&#39;I&#39;</span>,<span class="charliteral">&#39;L&#39;</span>,0};</div><div class="line">    <a class="code" href="structvine__buffer__s.html">vine_buffer_s</a>  outputs[1] = {<a class="code" href="vine__buffer_8h.html#af3a4ffac07a26b21b8b2dcb886b830e3">VINE_BUFFER</a>(result,<a class="code" href="producer_8c.html#a894874fce4252e840e2412fd1dbfa4ea">OUTPUT_SIZE</a>)};</div><div class="line">    <a class="code" href="structvine__buffer__s.html">vine_buffer_s</a> *<a class="code" href="vdf_8cpp.html#af4cdfe4b2cecfdb851231d28aa2db854">args</a> = 0;</div><div class="line">    <a class="code" href="vine__talk__types_8h.html#a3d26e751468e358a19eaa206b16dc626">vine_accel</a> **accels;</div><div class="line">    <span class="keywordtype">int</span>        accels_count;</div><div class="line"></div><div class="line">    accels_count = <a class="code" href="vine__talk_8h.html#ab1d17f63b021eb05dcbf1b2aac7001b7">vine_accel_list</a>(<a class="code" href="vine__talk__types_8h.html#ae1360554e303883862a00382e62a6ecda0035eb0600d18dfc302f6bf7a7cbfa3b">CPU</a>, 1, &amp;accels); <span class="comment">/* Find all</span></div><div class="line"><span class="comment">                                                     * usable/appropriate</span></div><div class="line"><span class="comment">                                                     * physical accelerators. */</span></div><div class="line"></div><div class="line">    <span class="keywordflow">if</span> (!accels_count)</div><div class="line">        <span class="keywordflow">return</span> 0; <span class="comment">/* No accelerators available! */</span></div><div class="line"></div><div class="line">    printf(<span class="stringliteral">&quot;Found %d accelerators.\n&quot;</span>, accels_count);</div><div class="line"></div><div class="line">    <a class="code" href="vine__talk__types_8h.html#a3d26e751468e358a19eaa206b16dc626">vine_accel</a> *accel; <span class="comment">/* The accelerator to use */</span></div><div class="line"></div><div class="line">    accel = accels[rand()%accels_count]; <span class="comment">/* Choose accelerator randomly */</span></div><div class="line"></div><div class="line">    <a class="code" href="vine__talk__types_8h.html#a05127582e850b1f19fc38abfd78ccd33">vine_task</a> *task = <a class="code" href="vine__talk_8h.html#aedb8795edb0156af6b03e4cae61fbd8c">vine_task_issue</a>(accel, add_proc, <a class="code" href="vdf_8cpp.html#af4cdfe4b2cecfdb851231d28aa2db854">args</a>, 2, inputs, 1,</div><div class="line">                                      outputs); <span class="comment">/* Issue task to</span></div><div class="line"><span class="comment">                                                 * accelerator. */</span></div><div class="line"></div><div class="line">    printf(<span class="stringliteral">&quot;Waiting for issued task %p.\n&quot;</span>, task);</div><div class="line"></div><div class="line">    <span class="keywordflow">if</span> (<a class="code" href="vine__talk_8h.html#aac7f50c5715bb86b23745bd19addd8ae">vine_task_wait</a>(task) == <a class="code" href="vine__talk__types_8h.html#a02c29f7677bfa284efb20ffaa5c74a7aaea4c704d1c494c1f4cac58eda90716b0">task_failed</a>) <span class="comment">/* Wait for task or exit if it</span></div><div class="line"><span class="comment">                                          * fails */</span></div><div class="line">        <span class="keywordflow">return</span> 0;</div><div class="line"></div><div class="line">    printf(<span class="stringliteral">&quot;Got: \&#39;%s\&#39;\n&quot;</span>,result);</div><div class="line"></div><div class="line">    <a class="code" href="vine__talk_8h.html#a888a471804241ed0c809348989d0d5fd">vine_task_free</a>(task);</div><div class="line">    <a class="code" href="vine__talk_8h.html#aa15ee30e249591fe60a57b4c84379cf7">vine_proc_put</a>(add_proc); <span class="comment">/* Notify repository that add_proc is no longer</span></div><div class="line"><span class="comment">                              * in use by us. */</span></div><div class="line">    free(accels);</div><div class="line"></div><div class="line">    <span class="keywordflow">return</span> 0;</div><div class="line">}                  <span class="comment">/* thread */</span></div><div class="line"></div><div class="line"><span class="keywordtype">void</span> <a class="code" href="producer_8c.html#a1e34c47687440ed9df54aa8655857821">spawn_producers</a>(pthread_t * <a class="code" href="src_2arch_2shm_2vine__talk_8c.html#aa94eb0857e9029089299368b1484e851">threads</a>,<span class="keywordtype">size_t</span> number_of_threads)</div><div class="line">{</div><div class="line">    <span class="keywordtype">size_t</span> i;</div><div class="line">    <span class="keywordflow">for</span> (i = 0; i &lt; number_of_threads; i++) {</div><div class="line">        <a class="code" href="testing_8h.html#a4271640235a40ad625b207c86eff882b">pthread_create</a>(<a class="code" href="src_2arch_2shm_2vine__talk_8c.html#aa94eb0857e9029089299368b1484e851">threads</a>, NULL, <a class="code" href="testing_8h.html#abcb7402d3509701b36e879da6711477d">thread</a>, NULL);</div><div class="line">        <a class="code" href="src_2arch_2shm_2vine__talk_8c.html#aa94eb0857e9029089299368b1484e851">threads</a>++;</div><div class="line">    }</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keywordtype">void</span> <a class="code" href="producer_8c.html#a1b2f2645a37d937705ff736d3a2fb377">wait_producers</a>(pthread_t * <a class="code" href="src_2arch_2shm_2vine__talk_8c.html#aa94eb0857e9029089299368b1484e851">threads</a>,<span class="keywordtype">size_t</span> number_of_threads)</div><div class="line">{</div><div class="line">    <span class="keywordtype">size_t</span> i;</div><div class="line">    <span class="keywordflow">for</span> (i = 0; i &lt; number_of_threads; i++) {</div><div class="line">        pthread_join(*<a class="code" href="src_2arch_2shm_2vine__talk_8c.html#aa94eb0857e9029089299368b1484e851">threads</a>, NULL);</div><div class="line">        <a class="code" href="src_2arch_2shm_2vine__talk_8c.html#aa94eb0857e9029089299368b1484e851">threads</a>++;</div><div class="line">    }</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keywordtype">int</span> <a class="code" href="test_8c.html#a0ddf1224851353fc92bfbff6f499fa97">main</a>(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> *argv[])</div><div class="line">{</div><div class="line">    <span class="keywordflow">if</span> (argc != 2) {</div><div class="line">        fprintf(<a class="code" href="namespacebreaker.html#ae6b0515ae8a991c3aa2c521bcc11953b">stdout</a>, <span class="stringliteral">&quot;./ex2 &lt;number_of_threads&gt; \n&quot;</span>);</div><div class="line">        <span class="keywordflow">return</span> 0;</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="keywordtype">int</span>       number_of_threads = atoi(argv[1]);</div><div class="line"></div><div class="line">    pthread_t tid[number_of_threads];</div><div class="line"></div><div class="line">    <a class="code" href="vine__talk_8h.html#a1fddfaf3cd290cd98f9e57a17661a20b">vine_talk_init</a>();</div><div class="line"></div><div class="line">    <a class="code" href="producer_8c.html#a1e34c47687440ed9df54aa8655857821">spawn_producers</a>(tid,number_of_threads);</div><div class="line"></div><div class="line">    <a class="code" href="producer_8c.html#a1b2f2645a37d937705ff736d3a2fb377">wait_producers</a>(tid,number_of_threads);</div><div class="line"></div><div class="line">    <a class="code" href="vine__talk_8h.html#aa863f116d46fc35daa4342dbd22392c1">vine_talk_exit</a>();</div><div class="line">    <span class="keywordflow">return</span> 0;</div><div class="line">}</div></div><!-- fragment --> 
<p class="definition">Definition in file <a class="el" href="vine__talk_8h_source.html">vine_talk.h</a>.</p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a93bc235e67e8d8393d0c67d6741a6059"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a93bc235e67e8d8393d0c67d6741a6059">&#9670;&nbsp;</a></span>vine_accel_acquire_phys()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int vine_accel_acquire_phys </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="vine__talk__types_8h.html#a3d26e751468e358a19eaa206b16dc626">vine_accel</a> **&#160;</td>
          <td class="paramname"><em>accel</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Acquire specific physical accelerator specified by accel for exclusive use.</p>
<dl class="section note"><dt>Note</dt><dd>By default all accelerators are 'shared' </dd>
<dd>
Every call to vine_accel_acquire must have a matching vine_accel_release call.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">accel</td><td>Accelerator to be acquired for exclusive use. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Return 1 if successful, 0 on failure. </dd></dl>

<p class="definition">Definition at line <a class="el" href="src_2arch_2shm_2vine__talk_8c_source.html#l00351">351</a> of file <a class="el" href="src_2arch_2shm_2vine__talk_8c_source.html">vine_talk.c</a>.</p>

</div>
</div>
<a id="a98abe6596404bad361779e08792e9868"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a98abe6596404bad361779e08792e9868">&#9670;&nbsp;</a></span>vine_accel_acquire_type()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="vine__talk__types_8h.html#a3d26e751468e358a19eaa206b16dc626">vine_accel</a>* vine_accel_acquire_type </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="vine__talk__types_8h.html#a28067f06d532de7cd0b4f901db02458c">vine_accel_type_e</a>&#160;</td>
          <td class="paramname"><em>type</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Acquire a virtual accelerator of the given <code>type</code>.</p>
<dl class="section note"><dt>Note</dt><dd>Every call to vine_accel_acquire must have a matching vine_accel_release call.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">type</td><td>Accelerator type to be acquired. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Return acquired virtual accelerator, NULL on failure. </dd></dl>

<p class="definition">Definition at line <a class="el" href="src_2arch_2shm_2vine__talk_8c_source.html#l00376">376</a> of file <a class="el" href="src_2arch_2shm_2vine__talk_8c_source.html">vine_talk.c</a>.</p>

</div>
</div>
<a id="ab1d17f63b021eb05dcbf1b2aac7001b7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab1d17f63b021eb05dcbf1b2aac7001b7">&#9670;&nbsp;</a></span>vine_accel_list()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int vine_accel_list </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="vine__talk__types_8h.html#a28067f06d532de7cd0b4f901db02458c">vine_accel_type_e</a>&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>physical</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="vine__talk__types_8h.html#a3d26e751468e358a19eaa206b16dc626">vine_accel</a> ***&#160;</td>
          <td class="paramname"><em>accels</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return number of accelerators of provided type If zero is returned no matching devices were found. If accels is not null an array with all matching accelerator descriptors is allocated and passed to the user. </p><dl class="section note"><dt>Note</dt><dd>The *accels pointer must be freed by the user using free().</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">type</td><td>Count only accelerators of specified vine_accel_type_e </td></tr>
    <tr><td class="paramname">physical</td><td>Boolean value (0,1), if true return physical accelerators, if false return virtual accelerators. </td></tr>
    <tr><td class="paramname">accels</td><td>pointer to array with available matching accelerator descriptors. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Number of available accelerators of specified type. </dd></dl>

<p class="definition">Definition at line <a class="el" href="src_2arch_2shm_2vine__talk_8c_source.html#l00210">210</a> of file <a class="el" href="src_2arch_2shm_2vine__talk_8c_source.html">vine_talk.c</a>.</p>

</div>
</div>
<a id="a91da26a0388c924a26210abe902a22f7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a91da26a0388c924a26210abe902a22f7">&#9670;&nbsp;</a></span>vine_accel_list_free()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vine_accel_list_free </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="vine__talk__types_8h.html#a3d26e751468e358a19eaa206b16dc626">vine_accel</a> **&#160;</td>
          <td class="paramname"><em>accels</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Free memory of accelerator array returned by vine_accel_list</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">accels</td><td>pointer acquired through a vine_accel_list call. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="src_2arch_2shm_2vine__talk_8c_source.html#l00280">280</a> of file <a class="el" href="src_2arch_2shm_2vine__talk_8c_source.html">vine_talk.c</a>.</p>

</div>
</div>
<a id="ade86038a37023bdefaf6ba0b2595b60b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ade86038a37023bdefaf6ba0b2595b60b">&#9670;&nbsp;</a></span>vine_accel_location()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="vine__talk__types_8h.html#a70d090e66fac50d9bcdea0bc0d9cee56">vine_accel_loc_s</a> vine_accel_location </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="vine__talk__types_8h.html#a3d26e751468e358a19eaa206b16dc626">vine_accel</a> *&#160;</td>
          <td class="paramname"><em>accel</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return location object for accelerator specified by accel.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">accel</td><td>A valid vine_accel descriptor returned by <a class="el" href="vine__talk_8h.html#ab1d17f63b021eb05dcbf1b2aac7001b7">vine_accel_list()</a>. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="structvine__accel__loc.html">vine_accel_loc</a> object specifying the location of an accelerator. </dd></dl>

<p class="definition">Definition at line <a class="el" href="src_2arch_2dummy_2vine__talk_8c_source.html#l00039">39</a> of file <a class="el" href="src_2arch_2dummy_2vine__talk_8c_source.html">vine_talk.c</a>.</p>

</div>
</div>
<a id="afd364333343dbbfd8bf7f7ef590ca868"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afd364333343dbbfd8bf7f7ef590ca868">&#9670;&nbsp;</a></span>vine_accel_release()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vine_accel_release </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="vine__talk__types_8h.html#a3d26e751468e358a19eaa206b16dc626">vine_accel</a> **&#160;</td>
          <td class="paramname"><em>accel</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Release previously acquired accelerator.</p>
<dl class="section note"><dt>Note</dt><dd>By default all accelerators are 'shared' </dd>
<dd>
Every call to vine_accel_acquire must have a matching vine_accel_release call.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">accel</td><td>A previously acquired accelerator to be released. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Return 1 if successful, 0 on failure. </dd></dl>

<p class="definition">Definition at line <a class="el" href="src_2arch_2shm_2vine__talk_8c_source.html#l00392">392</a> of file <a class="el" href="src_2arch_2shm_2vine__talk_8c_source.html">vine_talk.c</a>.</p>

</div>
</div>
<a id="a580e533b8fe1c8993ef0df4fc7ccf57f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a580e533b8fe1c8993ef0df4fc7ccf57f">&#9670;&nbsp;</a></span>vine_accel_stat()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="vine__talk__types_8h.html#a1d86936cf4f47960ac4aa4066366894b">vine_accel_state_e</a> vine_accel_stat </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="vine__talk__types_8h.html#a3d26e751468e358a19eaa206b16dc626">vine_accel</a> *&#160;</td>
          <td class="paramname"><em>accel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="vine__talk__types_8h.html#a7fd48fa268edf312064cc8136c6f403f">vine_accel_stats_s</a> *&#160;</td>
          <td class="paramname"><em>stat</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return statistics of accelerator specified by accel.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">accel</td><td>A valid vine_accel descriptor returned by <a class="el" href="vine__talk_8h.html#ab1d17f63b021eb05dcbf1b2aac7001b7">vine_accel_list()</a>. </td></tr>
    <tr><td class="paramname">stat</td><td>A pointer to a vine_accel_stats_s struct, to be filled with the accel statistics. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The state of the accelerator at the time of the call. </dd></dl>

<p class="definition">Definition at line <a class="el" href="src_2arch_2dummy_2vine__talk_8c_source.html#l00057">57</a> of file <a class="el" href="src_2arch_2dummy_2vine__talk_8c_source.html">vine_talk.c</a>.</p>

</div>
</div>
<a id="a0509922e5872e8cf463bba277dcdda5d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0509922e5872e8cf463bba277dcdda5d">&#9670;&nbsp;</a></span>vine_accel_type()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="vine__talk__types_8h.html#a28067f06d532de7cd0b4f901db02458c">vine_accel_type_e</a> <a class="el" href="vine__talk__types_8h.html#ae1360554e303883862a00382e62a6ecd">vine_accel_type</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="vine__talk__types_8h.html#a3d26e751468e358a19eaa206b16dc626">vine_accel</a> *&#160;</td>
          <td class="paramname"><em>accel</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return the type of accelerator specified by accel.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">accel</td><td>A valid vine_accel descriptor returned by <a class="el" href="vine__talk_8h.html#ab1d17f63b021eb05dcbf1b2aac7001b7">vine_accel_list()</a>. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A value from vine_accel_type_e. </dd></dl>

<p class="definition">Definition at line <a class="el" href="src_2arch_2dummy_2vine__talk_8c_source.html#l00048">48</a> of file <a class="el" href="src_2arch_2dummy_2vine__talk_8c_source.html">vine_talk.c</a>.</p>

</div>
</div>
<a id="ac4906d6ab1c3c37c7dc0ade34ad65b6f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac4906d6ab1c3c37c7dc0ade34ad65b6f">&#9670;&nbsp;</a></span>vine_proc_get()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="vine__talk__types_8h.html#a52f8406ca38559d34b304c16b45d60a8">vine_proc</a>* vine_proc_get </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="vine__talk__types_8h.html#a28067f06d532de7cd0b4f901db02458c">vine_accel_type_e</a>&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>func_name</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Retrieve a previously registered vine_proc pointer.</p>
<dl class="section note"><dt>Note</dt><dd>For every <a class="el" href="vine__talk_8h.html#ac4906d6ab1c3c37c7dc0ade34ad65b6f">vine_proc_get()</a>/vine_proc_register() there should be a matching call to <a class="el" href="vine__talk_8h.html#aa15ee30e249591fe60a57b4c84379cf7">vine_proc_put()</a></dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">type</td><td>Provided binaries work for this type of accelerators. </td></tr>
    <tr><td class="paramname">func_name</td><td>Descriptive name of function, as provided to vine_proc_register. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>vine_proc * corresponding to the requested function, NULL on failure. </dd></dl>

<p class="definition">Definition at line <a class="el" href="src_2arch_2dummy_2vine__talk_8c_source.html#l00096">96</a> of file <a class="el" href="src_2arch_2dummy_2vine__talk_8c_source.html">vine_talk.c</a>.</p>

</div>
</div>
<a id="aa15ee30e249591fe60a57b4c84379cf7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa15ee30e249591fe60a57b4c84379cf7">&#9670;&nbsp;</a></span>vine_proc_put()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int vine_proc_put </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="vine__talk__types_8h.html#a52f8406ca38559d34b304c16b45d60a8">vine_proc</a> *&#160;</td>
          <td class="paramname"><em>func</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Delete registered vine_proc pointer.</p>
<dl class="section note"><dt>Note</dt><dd>For every <a class="el" href="vine__talk_8h.html#ac4906d6ab1c3c37c7dc0ade34ad65b6f">vine_proc_get()</a>/vine_proc_register() there should be a matching call to <a class="el" href="vine__talk_8h.html#aa15ee30e249591fe60a57b4c84379cf7">vine_proc_put()</a></dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">func</td><td>vine_proc to be deleted. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="src_2arch_2dummy_2vine__talk_8c_source.html#l00106">106</a> of file <a class="el" href="src_2arch_2dummy_2vine__talk_8c_source.html">vine_talk.c</a>.</p>

</div>
</div>
<a id="aef9de636bc13a16a26d392dd1f65ff23"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aef9de636bc13a16a26d392dd1f65ff23">&#9670;&nbsp;</a></span>vine_proc_register()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="vine__talk__types_8h.html#a52f8406ca38559d34b304c16b45d60a8">vine_proc</a>* vine_proc_register </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="vine__talk__types_8h.html#a28067f06d532de7cd0b4f901db02458c">vine_accel_type_e</a>&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>func_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>func_bytes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>func_bytes_size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Register a new process 'func_name' for vine_accel_type_e type accelerators. Returned vine_proc * identifies given function globally. func_bytes contains executable for the given vine_accel_type_e. (e.g. for Fpga bitstream, for GPU CUDA binaries or source(?), for CPU binary code)</p>
<p>In case a function is already registered(same type and func_name), func_bytes will be compared. If func_bytes are equal the function will return the previously registered vine_proc. If func_bytes don't match, the second function will return NULL denoting failure.</p>
<dl class="section note"><dt>Note</dt><dd>For every <a class="el" href="vine__talk_8h.html#ac4906d6ab1c3c37c7dc0ade34ad65b6f">vine_proc_get()</a>/vine_proc_register() there should be a matching call to <a class="el" href="vine__talk_8h.html#aa15ee30e249591fe60a57b4c84379cf7">vine_proc_put()</a></dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">type</td><td>Provided binaries work for this type of accelerators. </td></tr>
    <tr><td class="paramname">func_name</td><td>Descriptive name of function, has to be unique for given type. </td></tr>
    <tr><td class="paramname">func_bytes</td><td>Binary containing executable of the appropriate format. </td></tr>
    <tr><td class="paramname">func_bytes_size</td><td>Size of provided func_bytes array in bytes. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>vine_proc * corresponding to the registered function, NULL on failure. </dd></dl>

<p class="definition">Definition at line <a class="el" href="src_2arch_2dummy_2vine__talk_8c_source.html#l00084">84</a> of file <a class="el" href="src_2arch_2dummy_2vine__talk_8c_source.html">vine_talk.c</a>.</p>

</div>
</div>
<a id="aa863f116d46fc35daa4342dbd22392c1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa863f116d46fc35daa4342dbd22392c1">&#9670;&nbsp;</a></span>vine_talk_exit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vine_talk_exit </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Exit and cleanup VineTalk. </p>

<p class="definition">Definition at line <a class="el" href="src_2arch_2shm_2vine__talk_8c_source.html#l00176">176</a> of file <a class="el" href="src_2arch_2shm_2vine__talk_8c_source.html">vine_talk.c</a>.</p>

</div>
</div>
<a id="a1fddfaf3cd290cd98f9e57a17661a20b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1fddfaf3cd290cd98f9e57a17661a20b">&#9670;&nbsp;</a></span>vine_talk_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="vine__pipe_8h.html#a6d4fcd27f2cef464d7989cc8eb20723f">vine_pipe_s</a>* vine_talk_init </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Initialize VineTalk. </p>

<p class="definition">Definition at line <a class="el" href="src_2arch_2shm_2vine__talk_8c_source.html#l00033">33</a> of file <a class="el" href="src_2arch_2shm_2vine__talk_8c_source.html">vine_talk.c</a>.</p>

</div>
</div>
<a id="a888a471804241ed0c809348989d0d5fd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a888a471804241ed0c809348989d0d5fd">&#9670;&nbsp;</a></span>vine_task_free()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vine_task_free </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="vine__talk__types_8h.html#a05127582e850b1f19fc38abfd78ccd33">vine_task</a> *&#160;</td>
          <td class="paramname"><em>task</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="src_2arch_2shm_2vine__talk_8c_source.html#l00617">617</a> of file <a class="el" href="src_2arch_2shm_2vine__talk_8c_source.html">vine_talk.c</a>.</p>

</div>
</div>
<a id="aedb8795edb0156af6b03e4cae61fbd8c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aedb8795edb0156af6b03e4cae61fbd8c">&#9670;&nbsp;</a></span>vine_task_issue()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="vine__talk__types_8h.html#a05127582e850b1f19fc38abfd78ccd33">vine_task</a>* vine_task_issue </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="vine__talk__types_8h.html#a3d26e751468e358a19eaa206b16dc626">vine_accel</a> *&#160;</td>
          <td class="paramname"><em>accel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="vine__talk__types_8h.html#a52f8406ca38559d34b304c16b45d60a8">vine_proc</a> *&#160;</td>
          <td class="paramname"><em>proc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structvine__buffer__s.html">vine_buffer_s</a> *&#160;</td>
          <td class="paramname"><em>args</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>in_count</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structvine__buffer__s.html">vine_buffer_s</a> *&#160;</td>
          <td class="paramname"><em>input</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>out_count</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structvine__buffer__s.html">vine_buffer_s</a> *&#160;</td>
          <td class="paramname"><em>output</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Issue a new vine_task.</p>
<p>This call must be followed by calls to <a class="el" href="vine__talk_8h.html#aac7f50c5715bb86b23745bd19addd8ae">vine_task_wait()</a> and <a class="el" href="vine__talk_8h.html#a888a471804241ed0c809348989d0d5fd">vine_task_free()</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">accel</td><td>The accelerator responsible for executing the task. </td></tr>
    <tr><td class="paramname">proc</td><td>vine_proc to be dispatched on accelerator. </td></tr>
    <tr><td class="paramname">args</td><td>vine_data pointing to packed function arguments. </td></tr>
    <tr><td class="paramname">in_count</td><td>size of input array (elements). </td></tr>
    <tr><td class="paramname">input</td><td>array of vine_data pointers with input data. </td></tr>
    <tr><td class="paramname">out_count</td><td>size of output array (elements). </td></tr>
    <tr><td class="paramname">output</td><td>array of vine_data pointers with output data. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>vine_task * corresponding to the issued function invocation. </dd></dl>

<p class="definition">Definition at line <a class="el" href="src_2arch_2shm_2vine__talk_8c_source.html#l00481">481</a> of file <a class="el" href="src_2arch_2shm_2vine__talk_8c_source.html">vine_talk.c</a>.</p>

</div>
</div>
<a id="a205d618b2de39299c462965386cf122a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a205d618b2de39299c462965386cf122a">&#9670;&nbsp;</a></span>vine_task_stat()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="vine__talk__types_8h.html#a02c29f7677bfa284efb20ffaa5c74a7a">vine_task_state_e</a> vine_task_stat </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="vine__talk__types_8h.html#a05127582e850b1f19fc38abfd78ccd33">vine_task</a> *&#160;</td>
          <td class="paramname"><em>task</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="vine__talk__types_8h.html#a73d6ee4415d3d6e165d79143d4be5ba8">vine_task_stats_s</a> *&#160;</td>
          <td class="paramname"><em>stats</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Get vine_task status and statistics. If stats is not NULL, copy task statistics to stats.</p>
<dl class="section note"><dt>Note</dt><dd>This function does not call <a class="el" href="vine__talk_8h.html#aac7f50c5715bb86b23745bd19addd8ae">vine_task_wait()</a>, so the user must call it before accessing related vine_buffers.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">task</td><td>The vine_task of interest. </td></tr>
    <tr><td class="paramname">stats</td><td>Pointer to an allocated <a class="el" href="structvine__task__stats.html">vine_task_stats</a> struct to be filled with statistics. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The current vine_task_state of the task. </dd></dl>

<p class="definition">Definition at line <a class="el" href="src_2arch_2dummy_2vine__talk_8c_source.html#l00166">166</a> of file <a class="el" href="src_2arch_2dummy_2vine__talk_8c_source.html">vine_talk.c</a>.</p>

</div>
</div>
<a id="aac7f50c5715bb86b23745bd19addd8ae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aac7f50c5715bb86b23745bd19addd8ae">&#9670;&nbsp;</a></span>vine_task_wait()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="vine__talk__types_8h.html#a02c29f7677bfa284efb20ffaa5c74a7a">vine_task_state_e</a> vine_task_wait </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="vine__talk__types_8h.html#a05127582e850b1f19fc38abfd78ccd33">vine_task</a> *&#160;</td>
          <td class="paramname"><em>task</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Wait for an issued task to complete or fail.</p>
<p>When provided task is successfully completed, user buffers are synchronized with up to date data from vine_talks internal buffers.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">task</td><td>The task to wait for. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The vine_task_state of the given vine_task. </dd></dl>

<p class="definition">Definition at line <a class="el" href="src_2arch_2dummy_2vine__talk_8c_source.html#l00176">176</a> of file <a class="el" href="src_2arch_2dummy_2vine__talk_8c_source.html">vine_talk.c</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_d44c64559bbebec7f509842c48db8b23.html">include</a></li><li class="navelem"><a class="el" href="vine__talk_8h.html">vine_talk.h</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.14 </li>
  </ul>
</div>
</body>
</html>
