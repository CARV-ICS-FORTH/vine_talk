<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>VineTalk: README</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">VineTalk
   </div>
   <div id="projectbrief">ConnectingAccelerators</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('md_README.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">README </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><div class="image">
<img src="logo.png" alt="logo.png"/>
<div class="caption">
VineTalk Logo</div></div>
<p> This library aims to implement the main communication layer between the Application VMs and the Appliance VMs.</p>
<h1>Requirements</h1>
<p>To build <a class="el" href="namespaceVinetalk.html">Vinetalk</a> you will require cmake, ccmake and (optionaly but recomened) libpoco:</p>
<h2>ArchLinux</h2>
<p><code>sudo pacman -S cmake poco</code></p>
<h2>CentOS</h2>
<p><code>sudo yum install cmake poco-foundation poco-net</code></p>
<h2>Ubuntu</h2>
<p><code>sudo apt-get install cmake cmake-curses-gui libpoco-dev</code></p>
<h1>Folder layout</h1>
<ul>
<li>docs - Documentation</li>
<li>examples - Usage examples of the code</li>
<li>3rdparty - Third-party libraries.</li>
<li>include - Header files that expose the public interface</li>
<li>src - Source code<ul>
<li>core - The core implementation of the program/library</li>
<li>arch - The architectural specific implementations</li>
<li>utils: Contains helper modules, such as data structures, wrappers to external libraries, etc.</li>
</ul>
</li>
<li>tests - Contain the tests that should be run with <code>make test</code></li>
</ul>
<h1>API Documentation</h1>
<p><a href="docs/html/index.html">Documentation</a></p>
<h1>Building</h1>
<p><a class="el" href="namespaceVinetalk.html">Vinetalk</a> is built as a shared library(libvine.so), using cmake and make:</p>
<p>First build and navigate to your build folder:</p>
<p><code>mkdir build;cd build</code></p>
<p>You must then configure your build using ccmake or cmake directly:</p>
<h2>Configure with CCMake</h2>
<p>Run <code>ccmake ..</code> in your build folder and press <code>c</code> once:</p>
<div class="image">
<img src="ccmake_scr.png" alt="ccmake_scr.png"/>
<div class="caption">
ccmake screenshot</div></div>
<p> Every line correspond to a build option(see below for option descriptions). To change/set an option press enter, this will toggle a Boolean flag or allow you to edit a string option. For string press enter again to end string input.</p>
<p>Once you have configured your build, press <code>c</code> followed by <code>g</code>.</p>
<h2>Configure with CMake</h2>
<p>To configure using, on the build folder you type:</p>
<p><code>cmake [Configuration Options] ..</code></p>
<h3>Configuration Options</h3>
<table class="doxtable">
<tr>
<th>Option </th><th>Description  </th></tr>
<tr>
<td>-DALLOC_STATS=ON&amp;#124;OFF </td><td>Enable Allocator Statistics </td></tr>
<tr>
<td>-DARCH_ALLOC_MAX_SPACE=NUMBER </td><td>Set maximum usable allocator space </td></tr>
<tr>
<td>-DBREAKS_ENABLE </td><td>Enable breakdown reporting </td></tr>
<tr>
<td>-DBUILD_TESTS=ON&amp;#124;OFF </td><td>Build unit tests </td></tr>
<tr>
<td>-DCMAKE_BUILD_TYPE=Debug </td><td>Produce debug symbols </td></tr>
<tr>
<td>-DCOVERAGE=ON&amp;#124;OFF </td><td>Enable gcov coverage </td></tr>
<tr>
<td>-DJVineTalk </td><td>Build java <a class="el" href="namespaceVinetalk.html">Vinetalk</a> wrappers </td></tr>
<tr>
<td>-DTRACE_ENABLE=ON&amp;#124;OFF </td><td>Enable trace file creation </td></tr>
<tr>
<td>-DMMAP_POPULATE=ON&amp;#124;OFF </td><td>Add MAP_POPULTE flag in mmap. This will make <a class="el" href="vine__talk_8h.html#a1fddfaf3cd290cd98f9e57a17661a20b">vine_talk_init()</a> slower, use wisely. </td></tr>
<tr>
<td>-DUTILS_QUEUE_CAPACITY=NUMBER </td><td>Maximum number of outstanding tasks per task queue (Up to 65536), MUST BE power of 2 </td></tr>
<tr>
<td>-DVINE_CONFIG_FILE=FILE </td><td><a class="el" href="namespaceVinetalk.html">Vinetalk</a> configuration file </td></tr>
<tr>
<td>-Dasync_architecture=spin&amp;#124;mutex&amp;#124;ivshmem </td><td>Method used to ensure ordering </td></tr>
<tr>
<td>-Dtarget_architecture=shm </td><td>Method used to transfer data </td></tr>
</table>
<h2>CCMake</h2>
<p>Run <code>ccmake ..</code> in your build forder and press c:</p>
<h2>Build with Make</h2>
<p>After configuring, run <code>make</code></p>
<h2>Testing</h2>
<p>After building with tests enabled, you can run tests with <code>make test</code>.</p>
<h2>Install</h2>
<p>VineTalk can be 'installed' in two ways. System Wide install is the recomened method if deploying on a dedicated machine and have root/sudo access. User Specific installation is recomended if deploying in a shared machine with multiple users and dont have root/sudo access.</p>
<h3>System Wide Install</h3>
<p>After a successful build, run <code>make install</code>, with root privileges.</p>
<h3>User Specific Install</h3>
<p>You can use the LD_LIBRARY_PATH eviroment variable to load VineTalk from the build path.</p>
<p><code>export LD_LIBRARY_PATH=&lt;VineTalk build="" path&gt;=""&gt;</code></p>
<p>To find the apropriate VineTalk build path, run:</p>
<p><code>make VineTalkBuildPath</code></p>
<h2>Using the Vine Talk Library</h2>
<p>After a successful build your build directory will have a libvine.so file as well as an include folder. Add your build path as a library path and link with vinetalk <code>-lvine</code>. Also add the build/includes folder to your gcc include paths <code>-Ibuild/includes</code>.</p>
<h1>Configuration</h1>
<p>In order to configure the <a class="el" href="structvine__pipe.html">vine_pipe</a> endpoints, the user must provide architecture specific options.</p>
<p>These configuration options are stored at ~/.vinetalk and follow the format specified in <a class="el" href="config_8h.html">utils/config.h</a>.</p>
<p>This is a minimum working configuration:</p>
<p>``` shm_file vine_talk ```</p>
<p>The sections bellow specify the required keys for each supported vinetalk architecture:</p>
<h2>Breakdowns</h2>
<p>The BREAKS_ENABLE allow the generation of breakdowns(.brk) and headers (.hdr) for performance evaluation of the VineTalk system.</p>
<p>Steps:</p>
<ul>
<li>Enable BREAKS_ENABLE option and rebuild VineTalk.</li>
<li>Run applications...</li>
<li>When the controller terminates, you will have .hdr and .brk files for all procedures that run.</li>
</ul>
<h2>Vdf</h2>
<p>Vdf is a program located at the examples folder, allowing run time inspection of allocator statistics and breakdowns(and more to come). To be built it requires the Poco framework to be installed.</p>
<p>After running it spawns a web server at localhost:8888. The web ui allows inspection of allocator statistics and breakdowns.</p>
<h2>shm</h2>
<p>Shm implements the vinetalk API/protocol over a shared segment (POSIX or ivshmem).</p>
<h3>Required Configuration Keys</h3>
<table class="doxtable">
<tr>
<th>Option </th><th>Description  </th></tr>
<tr>
<td>shm_file </td><td>A file path specifying the shared segments file. </td></tr>
<tr>
<td>shm_size </td><td>The size of the shared segment in bytes. </td></tr>
</table>
<h3>Optional Configuration Keys</h3>
<table class="doxtable">
<tr>
<th>Option </th><th>Description  </th></tr>
<tr>
<td>shm_trunc </td><td>A boolean (0,1) setting if the shm_file should be truncated during initialization. </td></tr>
<tr>
<td>shm_off </td><td>Start mmap from the given byte offset instead from 0.Can be used to split a single shm to multiple <a class="el" href="structvine__pipe.html">vine_pipe</a> instances. </td></tr>
<tr>
<td>shm_ivshmem </td><td>Boolean , set to 1 if running inside a Vm with ivshmem. </td></tr>
</table>
<h2>tracer</h2>
<p>Tracer implements an api that tracing vine_talk interface.</p>
<h3>Required Configuration Keys</h3>
<h3>Optional Configuration Keys</h3>
<table class="doxtable">
<tr>
<th>Option </th><th>Description  </th></tr>
<tr>
<td>tracer_buffer_size </td><td>The size of log buffer in bytes,default is 100 entries </td></tr>
<tr>
<td>tracer_path </td><td>Existing folder, where trace log files will be placed, default is cwd </td></tr>
</table>
<h2>VDF</h2>
<p>VDF is a monitoring tool for <a class="el" href="namespaceVinetalk.html">Vinetalk</a>, exposing statistics through a web interface. It accepts the following arguements:</p>
<table class="doxtable">
<tr>
<th>Arguement </th><th>Description  </th></tr>
<tr>
<td>embed </td><td>Skips html and head tags from output, allowing output to be embeded </td></tr>
<tr>
<td>noalloc </td><td>Dont show allocation statistics </td></tr>
<tr>
<td>noobj </td><td>Dont show object statistics </td></tr>
<tr>
<td>nobreak </td><td>Dont show breakdowns </td></tr>
</table>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.5 </li>
  </ul>
</div>
</body>
</html>
